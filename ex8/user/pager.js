angular.module("uooc.pager",[]).constant("pagexConfig",{visiblePageCount:10,firstText:"首页",lastText:"尾页",prevText:"上一页",nextText:"下一页"}).directive("uoocPager",["pagexConfig","$timeout",function(e,a){return{link:function(n,t,g){function i(){var e,a,t;if(n.pagenums=[],0!=n.pageCount){for(n.currentPage>n.pageCount&&(n.currentPage=1),n.pageCount<=r?(e=1,a=n.pageCount):(t=Math.ceil(r/2),e=Math.max(n.currentPage-t,1),a=Math.min(e+r-1,n.pageCount),n.pageCount-a<t&&(e=a-r+1)),n.nofirst=e>1,n.nolast=a>=n.pageCount;e<=a;e++)n.pagenums.push(e);n.onPageChange()}}var r=angular.isDefined(g.visiblePageCount)?parseInt(g.visiblePageCount):e.visiblePageCount;n.firstText=angular.isDefined(g.firstText)?g.firstText:e.firstText,n.lastText=angular.isDefined(g.lastText)?g.lastText:e.lastText,n.prevText=angular.isDefined(g.prevText)?g.prevText:e.prevText,n.nextText=angular.isDefined(g.nextText)?g.nextText:e.nextText,n.currentPage=1,n.pageChange=function(e){e>=1&&e<=n.pageCount?n.currentPage=e:n.currentPage=1,a(function(){n.onPageClick()},300)},n.$watch("currentPage+pageCount",function(){i()})},replace:!0,restrict:"AE",scope:{pageCount:"=",currentPage:"=",onPageChange:"&",onPageClick:"&"},template:'<ul class="pagination" ng-show="pagenums.length > 1"><li ng-click="pageChange(currentPage-1>0?currentPage-1:1)" ng-hide="pagenums.length == 1"><a href="javascript:;">{{prevText}}</a></li><li ng-show="nofirst" ng-click="pageChange(1)"><a href="javascript:;">首页</a><li><li  ng-cloak ng-repeat="pagenum in pagenums" ng-click="pageChange(pagenum)" ng-class="{active:currentPage===pagenum}"><a href="javascript:;">{{pagenum}}</a></li><li ng-show="!nolast"><a href="javascript:;">...</a></li><li ng-show="!nolast" ng-click="pageChange(pageCount)"><a href="javascript:;">{{pageCount}}</a><li><li ng-click="pageChange(currentPage+1<=pageCount?currentPage+1:pageCount)" ng-hide="pagenums.length == 1"><a href="javascript:;">{{nextText}}</a></li></ul>'}}]);